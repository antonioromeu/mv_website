---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

interface Props {
    vimeoId: string;
    imageSrc: ImageMetadata;
    alt: string;
    color?: string;
    type?: 'trailer' | 'film';
}

const { 
    vimeoId, 
    imageSrc, 
    alt, 
    color = "white", 
    type = 'trailer'
} = Astro.props;

const label = type === 'film' ? 'Play Film' : 'Play Trailer';
---

<button 
    data-vimeo-id={vimeoId} 
    class="play-button group relative block w-full overflow-hidden isolate cursor-pointer"
>
    <Image 
        src={imageSrc} 
        alt={alt} 
        width={imageSrc.width} 
        height={imageSrc.height} 
        quality="high" 
        class="w-full h-auto transition-transform duration-700 group-hover:scale-105 group-[.is-active]:scale-105 block"
    />

    <div class="absolute inset-0 pointer-events-none flex items-center justify-center bg-black/20 opacity-0 group-hover:opacity-100 group-[.is-active]:opacity-100 transition-opacity duration-500 z-10">
        <span 
            style={`color: ${color}; border-color: ${color};`}
            class="text-xs tracking-[0.4em] font-bold border px-6 py-3"
        >
            {label}
        </span>
    </div>
</button>