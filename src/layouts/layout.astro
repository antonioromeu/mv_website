---
const { title } = Astro.props;
import '../styles/global.css'
import '@fontsource-variable/source-code-pro';
---

<html lang="en" class="scroll-smooth antialiased [text-size-adjust:100%]">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0" />
        <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
        <link rel="manifest" href="/favicon/site.webmanifest">
        <title>{title}</title>
    </head>

    <body class="overscroll-y-none">
        <nav class="sticky top-0 z-50 w-full bg-inherit transition-colors duration-500">
            <div 
                style="height: var(--nav-height);"
                class="w-full px-[3.5vw] flex flex-col md:flex-row items-start justify-center md:justify-between pt-[2vh] md:pt-[4vh] gap-6 md:gap-0"
            >
                <a 
                    href="javascript:void(0)" 
                    onclick="window.scrollTo({top: 0, behavior: 'smooth'}); history.pushState('', document.title, window.location.pathname);" 
                    class="nav-link group block no_uderline text-4xl md:text-6xl font-black tracking-tighter leading-[0.5] text-current transition-colors duration-500"
                >
                    Mário Veloso<br>
                    <span class="text-sm md:text-xl font-normal tracking-[0.0em]">Filmmaker, Portugal</span>
                </a>

                <!-- NAV BAR DESKTOP VIEW -->
                 <div class="hidden md:flex w-auto text-lg justify-start tracking-widest font-bold text-current gap-[13vw]">
                    <div class="relative group cursor-pointer">
                        <span class="nav-link hover:opacity-50 pb-2 block transition-opacity">Films</span>
                        <div class="hidden md:block absolute left-0 pt-4 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 min-w-50">
                            <div class="flex flex-col gap-4 bg-inherit border border-current border-opacity-10 p-6 backdrop-blur-md">
                                <a href="#cdv-section" class="text-xs tracking-[0.2em] hover:opacity-50 transition-opacity">Chuvas de Verão</a>
                                <a href="#fdb-section" class="text-xs tracking-[0.2em] hover:opacity-50 transition-opacity">Fora da Bouça</a>
                                <a href="#rt-section" class="text-xs tracking-[0.2em] hover:opacity-50 transition-opacity">Rio Torto</a>
                            </div>
                        </div>
                    </div>

                    <div class="relative group cursor-pointer">
                        <span class="nav-link hover:opacity-50 pb-2 block transition-opacity">Photos</span>
                        <div class="hidden md:block absolute left-0 pt-4 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 min-w-50">
                            <div class="flex flex-col gap-4 bg-inherit border border-current border-opacity-10 p-6 backdrop-blur-md">
                                <span class="text-xs tracking-[0.2em] transition-opacity">Coming Soon</span>
                            </div>
                        </div>
                    </div>

                    <div class="relative group cursor-pointer">
                        <span class="nav-link hover:opacity-50 pb-2 block transition-opacity">Info</span>
                        <div class="hidden md:block absolute right-0 pt-4 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 min-w-50">
                            <div class="flex flex-col gap-4 bg-inherit border border-current border-opacity-10 p-6 backdrop-blur-md">
                                <a href="#about-section" class="text-xs tracking-[0.2em] hover:opacity-50 transition-opacity">About Me</a>
                                <a href="#festivals-awards-section" class="text-xs tracking-[0.2em] hover:opacity-50 transition-opacity">Festivals & Awards</a>
                                <a href="#assistant-director-section" class="text-xs tracking-[0.2em] hover:opacity-50 transition-opacity">Assistant Director</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- NAV BAR MOBILE VIEW -->
                 <div class="flex w-full md:hidden text-sm tracking-widest justify-between font-bold text-current">
                    <div class="relative mobile-dropdown-container">
                        <span class="nav-link cursor-pointer transition-opacity active:opacity-50">Films</span>
                        <div class="mobile-dropdown-content pointer-events-none absolute left-0 top-full pt-4 opacity-0 scale-95 transition-all duration-300 min-w-40 z-60 visibility-hidden">
                            <div class="flex flex-col gap-4 bg-(--color-off-white) border border-current border-opacity-20 p-5 shadow-xl text-current">
                                <a href="#cdv-section" class="text-[10px] tracking-[0.2em]">Chuvas de Verão</a>
                                <a href="#fdb-section" class="text-[10px] tracking-[0.2em]">Fora da Bouça</a>
                                <a href="#rt-section" class="text-[10px] tracking-[0.2em]">Rio Torto</a>
                            </div>
                        </div>
                    </div>

                    <div class="relative mobile-dropdown-container">
                        <span class="nav-link cursor-pointer transition-opacity active:opacity-50">Photos</span>
                        <div class="mobile-dropdown-content pointer-events-none absolute left-0 top-full pt-4 opacity-0 scale-95 transition-all duration-300 min-w-40 z-60 visibility-hidden">
                            <div class="flex flex-col gap-4 bg-(--color-off-white) border border-current border-opacity-20 p-5 shadow-xl text-current">
                                <span class="text-[10px] tracking-[0.2em] transition-opacity">Coming Soon</span>
                            </div>
                        </div>
                    </div>

                    <div class="relative mobile-dropdown-container">
                        <span class="nav-link cursor-pointer transition-opacity active:opacity-50">Info</span>
                        <div class="mobile-dropdown-content pointer-events-none absolute right-0 top-full pt-4 opacity-0 scale-95 transition-all duration-300 min-w-40 z-60 visibility-hidden">
                            <div class="flex flex-col gap-4 bg-(--color-off-white) border border-current border-opacity-20 p-5 shadow-xl text-current">
                                <a href="#about-section" class="text-[10px] tracking-[0.2em]">About Me</a>
                                <a href="#festivals-awards-section" class="text-[10px] tracking-[0.2em]">Festivals & Awards</a>
                                <a href="#assistant-director-section" class="text-[10px] tracking-[0.2em]">Assistant Director</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
        
        <main>
            <slot />
        </main>
        
        <script>
            const dropdownContainers = document.querySelectorAll('.mobile-dropdown-container');
            const dropdownLinks = document.querySelectorAll('.mobile-dropdown-content a');
            document.addEventListener('DOMContentLoaded', () => {
                dropdownContainers.forEach(container => {
                    const trigger = container.querySelector('span');
                    trigger?.addEventListener('click', (e) => {
                        if (window.innerWidth < 768) {
                            e.stopPropagation(); 
                            dropdownContainers.forEach(c => {
                                if (c !== container) c.classList.remove('is-open');
                            });
                            container.classList.toggle('is-open');
                        }
                    });
                });
                dropdownLinks.forEach(link => {
                    link.addEventListener('click', () => {
                        dropdownContainers.forEach(c => c.classList.remove('is-open'));
                    });
                });
            });
        </script>
    </body>
</html>